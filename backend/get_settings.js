const WebSocket = require("ws"); const ws = new WebSocket("ws://localhost:4455"); ws.on("open", () => { console.log("Connected to OBS"); }); ws.on("message", (data) => { const message = JSON.parse(data); console.log("Received message type (op):", message.op); console.log("Full message:", JSON.stringify(message, null, 2)); if (message.op === 0) { ws.send(JSON.stringify({ op: 1, d: { rpcVersion: 1 } })); } else if (message.op === 2) { console.log("Identification successful, getting stream settings..."); ws.send(JSON.stringify({ op: 6, d: { requestType: "GetStreamServiceSettings", requestId: "get-settings-1" } })); } }); ws.on("close", (code, reason) => { console.log("Connection closed:", code, reason?.toString()); }); ws.on("error", (error) => { console.error("WebSocket error:", error); });
